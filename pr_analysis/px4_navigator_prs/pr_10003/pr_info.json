{
  "title": "Yaw remove slewrate",
  "url": "https://github.com/PX4/PX4-Autopilot/pull/10003",
  "number": 10003,
  "created_at": "2018-07-23T13:37:17Z",
  "merged": true,
  "merged_at": "2018-08-03T06:24:35Z",
  "state": "closed",
  "conversation": {
    "author": "Stifael",
    "body": "Similar to this [PR](https://github.com/PX4/Firmware/pull/9146) but without manual changes. \nThis PR moves the heading computation from navigator to FlightTaskAuto, which will also remove\nthe continuous triplet update due to heading computation.",
    "issue_comments": [
      {
        "author": "Stifael",
        "created_at": "2018-07-23T13:48:18Z",
        "body": "it is to note that during any ROI mission without gimbal control/rotation, the heading will still continuously be updated by the navigator",
        "type": "issue_comment"
      },
      {
        "author": "ChristophTobler",
        "created_at": "2018-07-24T06:49:45Z",
        "body": "@Stifael Should we wait for https://github.com/PX4/Firmware/pull/10006 first?",
        "type": "issue_comment"
      },
      {
        "author": "Stifael",
        "created_at": "2018-07-24T06:52:45Z",
        "body": "> @Stifael Should we wait for #10006 first?\r\n\r\nyep, that makes sense. #10006 wasn't there when I created this PR",
        "type": "issue_comment"
      },
      {
        "author": "ChristophTobler",
        "created_at": "2018-08-02T09:11:19Z",
        "body": "@Stifael Do we need additional flight tests?",
        "type": "issue_comment"
      },
      {
        "author": "Stifael",
        "created_at": "2018-08-02T09:21:23Z",
        "body": "@PX4/testflights can you please test this PR with different heading settings? \r\nIt would be great to test this branch with a vtol / fixedwing as well.\r\n\r\nHeading settings are controller with: MPC_YAW_MODE",
        "type": "issue_comment"
      },
      {
        "author": "Tony3dr",
        "created_at": "2018-08-02T14:54:19Z",
        "body": "@Stifael did you mean MIS_YAWMODE to control heading during a mission?\r\n",
        "type": "issue_comment"
      },
      {
        "author": "santiago3dr",
        "created_at": "2018-08-02T15:01:09Z",
        "body": "flashed the pr, i see MPC_YAW_MODE appears in 'other' parameters\r\nwould the value be similar to MIS_YAWMODE?\r\nValues:\r\n0: Heading as set by waypoint\r\n1: Heading towards waypoint\r\n2: Heading towards home\r\n3: Heading away from home",
        "type": "issue_comment"
      },
      {
        "author": "Stifael",
        "created_at": "2018-08-02T15:21:58Z",
        "body": "similar: \r\n 0 towards waypoint\r\n 1 towards home\r\n 2 away from home\r\n 3 along trajectory\r\n\r\nSet by waypoint  got removed because if will take precedence over MPC_YAW_MODE. Basically if the mission sends a valid yaw waypoint, then the vehicle will obey that yaw waypoint independent of MPC_YAW_MODE/. ",
        "type": "issue_comment"
      },
      {
        "author": "santiago3dr",
        "created_at": "2018-08-02T15:26:40Z",
        "body": "thanks for the info, will test shortly",
        "type": "issue_comment"
      },
      {
        "author": "Avysuarez",
        "created_at": "2018-08-02T17:57:09Z",
        "body": "**Some flights with pixhawk 4 (V5). Good flights, heading towards waypoint**\r\n\r\nhttps://review.px4.io/plot_app?log=3b1aaa4c-e1df-4a54-811d-1ec7de1270d1\r\nhttps://review.px4.io/plot_app?log=3b1aaa4c-e1df-4a54-811d-1ec7de1270d1\r\nhttps://review.px4.io/plot_app?log=a448d8cb-8654-4596-9d0a-4dae924b78f1\r\n\r\n**Some flights with pixhawk 2.1 (V3). Good flights, heading towards waypoint**\r\nhttps://review.px4.io/plot_app?log=83616e27-9612-4a71-a2a1-f732edf072cb\r\nhttps://review.px4.io/plot_app?log=ea02ff15-43e9-4733-8ff9-f1c92b383257\r\nhttps://review.px4.io/plot_app?log=ea02ff15-43e9-4733-8ff9-f1c92b383257\r\n",
        "type": "issue_comment"
      },
      {
        "author": "dannyfpv",
        "created_at": "2018-08-02T18:12:35Z",
        "body": "couple flights on a Pixhawk pro (v4):\r\nhttps://review.px4.io/plot_app?log=97f18520-5fd9-4b17-a425-1118e0e051f9\r\nhttps://review.px4.io/plot_app?log=b70f9c01-9a71-4098-943c-98b2862ac486\r\n\r\npixhawk mini:\r\nhttps://review.px4.io/plot_app?log=ef395dc6-785b-4295-97cf-423577d80b74\r\nhttps://review.px4.io/plot_app?log=bafc63ea-e1c2-4b5b-8aa2-e22b7272809b\r\n\r\npixhawk v2\r\nhttps://review.px4.io/plot_app?log=d73899c2-2087-4f62-98fe-0ced68ca7c38\r\nhttps://review.px4.io/plot_app?log=d73899c2-2087-4f62-98fe-0ced68ca7c38\r\nland and rtl working properly\r\n\r\n",
        "type": "issue_comment"
      },
      {
        "author": "santiago3dr",
        "created_at": "2018-08-02T19:48:02Z",
        "body": "Few flights on a pixracer (v4)\r\nmcp_yaw_mode set to 0,1,2,3 respectively per flight\r\n\r\nhttps://logs.px4.io/plot_app?log=aec9e42c-94e9-4b3d-ac34-53113de5a712\r\nhttps://logs.px4.io/plot_app?log=a062494e-114c-4024-b42e-0b006afabc1f\r\nhttps://logs.px4.io/plot_app?log=80fd9e14-0219-47ea-8f0d-ae9f97535b0a\r\nhttps://logs.px4.io/plot_app?log=d14d154f-22b3-442e-b06c-b1dbf8290c1f\r\n\r\neverything looks to be working as expected",
        "type": "issue_comment"
      },
      {
        "author": "Stifael",
        "created_at": "2018-08-03T06:24:30Z",
        "body": "great thanks",
        "type": "issue_comment"
      }
    ],
    "review_comments": [
      {
        "author": "ChristophTobler",
        "created_at": "2018-08-02T09:08:12Z",
        "body": "typo: points",
        "path": "src/lib/FlightTasks/tasks/FlightTaskAuto.cpp",
        "position": 56,
        "type": "review_comment"
      }
    ],
    "reviews": [
      {
        "author": "ChristophTobler",
        "created_at": "",
        "body": "",
        "state": "APPROVED",
        "type": "review"
      }
    ]
  }
}