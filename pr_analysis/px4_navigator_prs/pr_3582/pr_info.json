{
  "title": "Navigator: Do not update a position setpoint for mission items not en…",
  "url": "https://github.com/PX4/PX4-Autopilot/pull/3582",
  "number": 3582,
  "created_at": "2016-01-24T16:03:27Z",
  "merged": false,
  "merged_at": null,
  "state": "closed",
  "conversation": {
    "author": "LorenzMeier",
    "body": "…coding positions. Fix for #3581 - or at least a step towards it.\n",
    "issue_comments": [
      {
        "author": "LorenzMeier",
        "created_at": "2016-01-24T16:04:11Z",
        "body": "@AndreasAntener @tumbili I think you need to do this or more to fix the zero altitude you got. It should at least point you into the right direction.\n",
        "type": "issue_comment"
      },
      {
        "author": "LorenzMeier",
        "created_at": "2016-01-24T16:27:43Z",
        "body": "@julianoes Please don't comment on commits, but on the diff here. Its non-consumable. This patch set is not complete. Its just a first step.\n",
        "type": "issue_comment"
      },
      {
        "author": "LorenzMeier",
        "created_at": "2016-01-24T16:28:28Z",
        "body": "What I fixed is the lower-level routine not having any boundary checks. The _real_ fix is to ensure it never gets called on a non-position setpoint!\n",
        "type": "issue_comment"
      },
      {
        "author": "LorenzMeier",
        "created_at": "2016-01-24T16:33:25Z",
        "body": "@tumbili @AndreasAntener @julianoes The real fix needs to be applied here: Instead of returning a mission item, this routine needs to return the next action and the next 3D position:\nhttps://github.com/PX4/Firmware/blob/6eac78d67529e20c3170092fd271c11c57c70f2f/src/modules/navigator/mission.cpp#L658-L759\n\nThen the action needs to be handled and the next 3D position is fed into the right mission logic. With that change we always have a next 3D position, no changes to the main waypoint code are required and we just need to slightly change the way commands are published.\n\nThe two PRs I submitted could potentially be left out as well. Please make sure you understand the implications before you continue on this.\n",
        "type": "issue_comment"
      },
      {
        "author": "AndreasAntener",
        "created_at": "2016-01-31T14:06:08Z",
        "body": "replaced by #3598\n",
        "type": "issue_comment"
      }
    ],
    "review_comments": [],
    "reviews": []
  }
}