{
  "title": "mavlink: increase first mission read timeout",
  "url": "https://github.com/PX4/PX4-Autopilot/pull/22057",
  "number": 22057,
  "created_at": "2023-09-07T18:26:54Z",
  "merged": false,
  "merged_at": null,
  "state": "closed",
  "conversation": {
    "author": "dagar",
    "body": " - relax timeout considerably, but only during init (typically when system is first starting up)\r\n\r\nSome boards are hitting this on the test rack, but it's fine if only happening at system startup when everything fighting to start in parallel.\r\n\r\n![image](https://github.com/PX4/PX4-Autopilot/assets/84712/0b0bcdf8-b74b-41d0-9ac6-5f5e6e739259)\r\n",
    "issue_comments": [
      {
        "author": "dagar",
        "created_at": "2023-09-07T18:40:30Z",
        "body": "Unless this is just a race condition with `navigator` establishing `DM_KEY_MISSION_STATE` (which is argubably obsolete anyway) in the first place.",
        "type": "issue_comment"
      },
      {
        "author": "dagar",
        "created_at": "2023-09-07T18:55:24Z",
        "body": "Something else is going on here, increasing the timeout made this fail on more boards.\r\n\r\n",
        "type": "issue_comment"
      },
      {
        "author": "dagar",
        "created_at": "2023-09-07T19:01:15Z",
        "body": "I had the dataman id indexing wrong, the problem was actually with DM_KEY_SAFE_POINTS and DM_KEY_FENCE_POINTS (items 0 & 1), not DM_KEY_WAYPOINTS_OFFBOARD_0/DM_KEY_WAYPOINTS_OFFBOARD_1.",
        "type": "issue_comment"
      },
      {
        "author": "dagar",
        "created_at": "2023-09-07T23:20:43Z",
        "body": "Proper fix is https://github.com/PX4/PX4-Autopilot/pull/22058 ",
        "type": "issue_comment"
      }
    ],
    "review_comments": [],
    "reviews": []
  }
}