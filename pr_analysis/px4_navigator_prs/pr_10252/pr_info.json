{
  "title": "Removed condition to move straight to RTL_LAND state.",
  "url": "https://github.com/PX4/PX4-Autopilot/pull/10252",
  "number": 10252,
  "created_at": "2018-08-16T21:24:54Z",
  "merged": true,
  "merged_at": "2018-08-16T22:08:47Z",
  "state": "closed",
  "conversation": {
    "author": "dakejahl",
    "body": "Essentially this not only doesn't work after adding the `_navigator->get_position_setpoint_triplet()->current.valid` check (setpoints are invalidated when navigator changes nav state) but sometimes it DOES work and instead of landing where it is AT (i.e `gpos.lat` and `gpos.lon`) the lat/lon setpoints are `home.lat` and `home.lon`. This is extremely bad, the vehicle just beelines towards `home.lat`, `home.lon`, and `home.alt`.\n\nThis wasn't a problem previously when we were using the `mc_pos_controller` for all the control, as previously the logic for `SETPOINT_TYPE_LAND` within `mc_pos_controller` would just set the lat/lon setpoints to NaN, which then caused the controller to default those setpoints to the current gpos.lat/gpos.lon and just land where it is at. \n\nI hope this didn't impact anyone other than ourselves. We've seen it maybe 5 times total over the course of the last few weeks of consistent flying. I don't know why it sometimes \"works\" and sometimes does not. Either way it needs to be removed!",
    "issue_comments": [
      {
        "author": "dagar",
        "created_at": "2018-08-16T22:08:15Z",
        "body": "Thanks for following up and fixing it. We can find another way to accomplish the same (intended) result.",
        "type": "issue_comment"
      },
      {
        "author": "dakejahl",
        "created_at": "2018-08-16T22:17:25Z",
        "body": "Of course. And yes, I think the logic belongs `commander` itself though.",
        "type": "issue_comment"
      }
    ],
    "review_comments": [],
    "reviews": [
      {
        "author": "dagar",
        "created_at": "",
        "body": "",
        "state": "APPROVED",
        "type": "review"
      }
    ]
  }
}