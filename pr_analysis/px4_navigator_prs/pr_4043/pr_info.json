{
  "title": "reset mission after vehicle was in mission and then disarms",
  "url": "https://github.com/PX4/PX4-Autopilot/pull/4043",
  "number": 4043,
  "created_at": "2016-03-20T13:46:35Z",
  "merged": false,
  "merged_at": null,
  "state": "closed",
  "conversation": {
    "author": "AndreasAntener",
    "body": "Fixes #3978 , SITL tested\nPlease review\n\nNote: I had the reset code in commander first but that didn't feel right so I moved it to mission. There might be a better way to trigger the reset instead via the `offboard_mission` topic.\n",
    "issue_comments": [
      {
        "author": "LorenzMeier",
        "created_at": "2016-03-20T13:56:32Z",
        "body": "Changes / architecture looks good.\n",
        "type": "issue_comment"
      },
      {
        "author": "LorenzMeier",
        "created_at": "2016-03-24T14:06:58Z",
        "body": "I commented on this. I think it needs to be done solely in the navigator without intervention from the commander.\n",
        "type": "issue_comment"
      },
      {
        "author": "AndreasAntener",
        "created_at": "2016-03-25T09:25:53Z",
        "body": "@LorenzMeier makes sense, will fix this\n",
        "type": "issue_comment"
      },
      {
        "author": "AndreasAntener",
        "created_at": "2016-03-27T02:02:24Z",
        "body": "Updated, SITL tested.\n",
        "type": "issue_comment"
      },
      {
        "author": "LorenzMeier",
        "created_at": "2016-03-27T10:27:01Z",
        "body": "Looked good, sane and safe, so I applied it to master, thanks!\n",
        "type": "issue_comment"
      }
    ],
    "review_comments": [
      {
        "author": "LorenzMeier",
        "created_at": "2016-03-24T14:05:18Z",
        "body": "Why is this logic in the commander after all? Can't the navigator just do this by itself, since it knows the current flight mode?\n",
        "path": "src/modules/commander/commander.cpp",
        "position": 1,
        "type": "review_comment"
      },
      {
        "author": "LorenzMeier",
        "created_at": "2016-03-24T14:05:49Z",
        "body": "This introduces a race with the mavlink app, which also publishes this topic. If we publish something from the commander, it would need to be done on a different topic.\n",
        "path": "src/modules/commander/commander.cpp",
        "position": 1,
        "type": "review_comment"
      },
      {
        "author": "LorenzMeier",
        "created_at": "2016-03-24T14:06:28Z",
        "body": "Would prefer to trigger this on a vehicle status change with state == mission and disarmed.\n",
        "path": "src/modules/navigator/mission.cpp",
        "position": 1,
        "type": "review_comment"
      }
    ],
    "reviews": []
  }
}